# nginx est un serveur web léger et performant, utilisé ici pour servir
# les fichiers statiques (HTML/CSS/JS) générés par Vite en production.
# Il remplace le serveur de développement Vite, qui n'est pas adapté à la production.
server {
    listen 80;

    root /usr/share/nginx/html;
    index index.html;

    location / {
        # try_files essaie de servir le fichier demandé tel quel.
        # Si le fichier n'existe pas (ex: /articles/3), il renvoie index.html.
        # C'est indispensable pour le routing côté client (React Router) :
        # React Router a besoin de recevoir index.html pour gérer la route lui-même.
        try_files $uri $uri/ /index.html;
    }
}
